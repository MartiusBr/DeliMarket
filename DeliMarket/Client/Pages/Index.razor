@page "/"
@page "/index"

@inject IRepositorio  repositorio

<h1>Productos</h1>
<div>
    <h3>Entrega Rápida</h3>
    <ListadoPeliculas Peliculas="EnCartelera" />
</div>

<div>
    <h3>Entrega Programada</h3>
    <ListadoPeliculas Peliculas="FuturosEstrenos" />
</div>

@code {
    private List<Pelicula> FuturosEstrenos;
    private List<Pelicula> EnCartelera;

    protected async override Task OnInitializedAsync()
    {
        var httpResponse = await repositorio.Get<HomePageDTO>("api/peliculas");

        if (httpResponse.Error)
        {
            Console.WriteLine(httpResponse.HttpResponseMessage.StatusCode);
        }
        else
        {
            FuturosEstrenos = httpResponse.Response.ProximosEstrenos;
            EnCartelera = httpResponse.Response.PeliculasEnCartelera;
        }
    }
}